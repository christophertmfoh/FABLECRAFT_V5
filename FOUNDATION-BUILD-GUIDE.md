# FABLECRAFT - THE MODERNIZED FOUNDATION

**GOAL:** Establish a production-grade, unopinionated foundation for a Nuxt 3 + Supabase application, built with current, stable, and secure dependencies. The result will be a blank white page, with all core technologies correctly installed and configured according to 2025 industry best practices.

This plan incorporates critical updates based on a professional audit.

## PHASE 1: PROJECT & MODERNIZED DEPENDENCIES

This phase uses current stable versions and includes essential tools for code quality and a reproducible build.

```bash
# 1. CREATE PROJECT INSIDE OF NUXT FOLDER

# 2. INITIALIZE NUUXT 3
npx nuxi@latest init .

# 3. INITIALIZE GIT & CREATE .gitignore
git init
echo "node_modules/
.nuxt/
.output/
dist/
.env
.DS_Store
*.log" > .gitignore

# 4. CONFIGURE PNPM FOR EXACT VERSIONING
# This professional standard prevents unexpected breaking changes.
echo "save-exact=true" > .npmrc

# 5. INSTALL UPDATED CORE DEPENDENCIES
# Using current, stable versions as of August 2025.
pnpm install --save-exact \
  @nuxtjs/supabase@1.6.0 \
  @pinia/nuxt@0.11.2 \
  @vueuse/core@13.6.0 \
  @tiptap/vue-3@3.0.9 \
  @tiptap/starter-kit@3.0.9

# 6. INSTALL UPDATED CORE DEV DEPENDENCIES
pnpm install -D --save-exact \
  typescript@5.5.4 \
  @types/node@20.14.15 \
  @nuxtjs/tailwindcss@6.14.0 \
  supabase@2.39.0

# 7. ADD ESLINT FOR CODE QUALITY (INDUSTRY STANDARD)
# This will set up the necessary configuration for linting.
npx nuxi@latest add eslint
```

## PHASE 2: MODERNIZED CONFIGURATION

This phase configures the tools with up-to-date best practices.

### 1. Update nuxt.config.ts:

This version includes the required compatibilityDate and css properties.

```typescript
// file: nuxt.config.ts
export default defineNuxtConfig({
  // Required for Nuxt 3.18+ to ensure future compatibility
  compatibilityDate: '2024-11-01',

  // Enable essential modules for the core stack
  modules: [
    '@nuxtjs/supabase',
    '@nuxtjs/tailwindcss',
    '@pinia/nuxt'
  ],

  // Explicitly load the global stylesheet
  css: ['~/assets/css/main.css'],

  // Supabase configuration for authentication redirects
  supabase: {
    redirectOptions: {
      login: '/login',
      callback: '/confirm',
      exclude: [], // No pages excluded by default
    }
  },

  // Enable TypeScript strict mode for code quality
  typescript: {
    strict: true,
    typeCheck: true,
  },

  // Enable Nuxt DevTools for development
  devtools: { enabled: true }
})
```

### 2. Create tailwind.config.ts:

This file remains minimal, as its job is simply to define content paths.

```typescript
// file: tailwind.config.ts
import type { Config } from 'tailwindcss'

export default {
  content: [
    './app.vue',
    './pages/**/*.vue',
    './components/**/*.vue',
    './layouts/**/*.vue',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
} satisfies Config
```

### 3. Create assets/css/main.css:

This file contains only the three required Tailwind directives.

```css
/* file: assets/css/main.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

## PHASE 3: ESSENTIAL FILES (UNCHANGED)

The minimalist file structure remains the same.

### 1. Create app.vue:

```vue
<!-- file: app.vue -->
<template>
  <div>
    <NuxtPage />
  </div>
</template>
```

### 2. Create pages/index.vue:

```vue
<!-- file: pages/index.vue -->
<template>
  <div>
    <h1>Fablecraft Foundation</h1>
    <p>Modernized build environment is ready.</p>
  </div>
</template>
```

## PHASE 4: BACKEND FOUNDATION (UNCHANGED)

The Supabase initialization and minimal schema remain best practice.

```bash
# 1. INITIALIZE SUPABASE
npx supabase init

# 2. CREATE INITIAL DATABASE SCHEMA
echo "-- Enable the pgvector extension for future use
create extension if not exists vector with schema extensions;

-- Create a table for user projects
create table projects (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users on delete cascade not null,
  name text,
  inserted_at timestamptz default now() not null
);

-- Set up Row Level Security for the projects table
alter table projects enable row level security;

create policy \"Users can manage their own projects.\" on projects
  for all using (auth.uid() = user_id);

" > supabase/migrations/0001_initial_schema.sql
```

## PHASE 5: MODERNIZED WORKFLOW & FINALIZATION

This phase adds missing development standards like .env.example and linting scripts.

### 1. Create .env.example file:

This is a template for environment variables, a critical best practice.

```bash
# file: .env.example
# This is an example file. Copy to .env and fill in your values.
SUPABASE_URL="http://localhost:54321"
SUPABASE_KEY="your-anon-key-from-terminal"
```

### 2. Update package.json with scripts:

Add these scripts to your package.json file for an efficient workflow.

```json
"scripts": {
  "dev": "nuxt dev",
  "build": "nuxt build",
  "preview": "nuxt preview",
  "postinstall": "nuxt prepare",
  "lint": "eslint .",
  "typecheck": "nuxt typecheck",
  "db:start": "supabase start",
  "db:stop": "supabase stop",
  "db:reset": "supabase db reset",
  "db:push": "supabase db push",
  "db:types": "supabase gen types typescript --local > types/supabase.ts"
}
```

## HOW TO START

The workflow remains the same, but is now built on a modern, secure foundation.

1. **Start the Backend:** Run `pnpm db:start` in your terminal.

2. **Create .env:** Copy `.env.example` to a new file named `.env` and paste the keys from the terminal output.

3. **Push the Database Schema:** Run `pnpm db:push`.

4. **Start the Frontend:** In a new terminal, run `pnpm dev`.

5. **Navigate to http://localhost:3000.** You will see the blank page, now confident that it is running on a fully updated, professional-grade foundation.